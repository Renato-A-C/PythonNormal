{% extends "base.html" %}
{% load static %}
{% block title %}Vamos vender{% endblock title %}
{% block divEsp %}
.especial{
  display: inline-block;
  max-width: 300px;
  
}
h2{
  text-align: center;
  font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
  
}

{% endblock divEsp %}
{% block active3 %}active{% endblock active3 %}{% block desativa3 %}disabled{% endblock desativa3 %}

{% block content %}
    <form method="POST">
        {% csrf_token %}
    
    <!-- Campo para selecionar o cliente -->
    <h2 >VENDAS</h2>

    <hr>
    <table>
      <tr>
        <td class="especial">
        <label for="funcionarioId">Funcionario:</label>
        <select class="form-control select2" name="funcionarioId" id="funcionarioId">

        {% for funcionarios in Funcionario %}
            {% if funcionarios.autor.id == user.id %}
            <option selected value="{{ funcionarios.id }}">{{ funcionarios.nomeFuncionario }}</option>
            {% else %}
            <option value="{{ funcionarios.id }}">{{ funcionarios.nomeFuncionario }}</option>
            {% endif %}
            {% endfor %}
        </select>
      </td>
      <td class="especial">
        <label for="clienteId">Cliente:</label>
        <select class="form-control select2" name="clienteId" id="clienteId">
        {% for cliente in Cliente %}
          <option value="{{ cliente.id }}">{{ cliente.nomeCliente}}</option>
        {% endfor %}
      </td>
      </tr>
    </table>

      <!-- Campo para selecionar o Funcionario -->
 
     

    <!-- Campo para adicionar produtos -->
   <br><br>
  <div class="container">
  <table class="table table-sm table-hover table-dark ">
  <tr>
    <td>Produto</td>
    <td>Quantidade</td>
    <td></td>
  </tr>
  {% for lproduto in LProduto %}
  <tr>
  
    <td>
      <select class="form-control select2" name="produtoId_{{lproduto.id}}" id="produtoId_{{lproduto.id}}" style="max-width: 300px;">      
        {% for produto in Produto %}
        {% if lproduto.produtoId.id == produto.id %}
        <option  selected value="{{ produto.id }}" >{{produto.id}} | {{ produto.nomeProduto }} || {{produto.precoProduto}} || {{produto.quantidadeProduto}}</option>
        {% else %}
        <option value="{{ produto.id }}" >{{produto.id}} | {{ produto.nomeProduto }} || {{produto.precoProduto}} || {{produto.quantidadeProduto}}</option>
        {% endif %}
        {% endfor %}
    </select>
    </td>
    <td>
      <input type="number" name="quantidade_{{lproduto.id}}" class="form-control form-control-sm" id="quantidade_{{lproduto.id}}" min="1" value="{{lproduto.quantidade}}" required="quantidade_{{lproduto.id}}" style="width: 300px;">
    </td>
    <td>
      <div>
        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#a{{ lproduto.id }}">Excluir</button>
        <!-- A modal -->
        
          <div class="modal" id="a{{ lproduto.id }}"> 
          <div class="modal-dialog">
            
            <div class="modal-content">
              
              <div class="modal-header">
                <h4 class="modal-title">Tem certeza? </h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
              </div>
              <div class="modal-body">Deseja excluir? o {{ lproduto.Id }}?
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
               
                <a type="button" class="btn btn-danger" href="{% url 'removep' lproduto.id %}">Deletar</a>
              </div>
            </div>
          </div>
        </div>
      </div>
          
    </td>
  </tr>
  {% endfor %}
</table>
</div>
   

    <!-- Campo para quantidade -->

    <!-- BotÃ£o para adicionar o item ao pedido -->
    <br>
    <button name="addpV2" class="btn btn-success" type="submit" >adicionar v2</button>
    <button type="submit">finalizar</button>
  </form>

<script>
    $(document).ready(function() {
        $('.select2').select2();
    });
</script>
{% endblock content %}