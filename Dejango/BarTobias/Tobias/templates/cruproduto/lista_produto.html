{% extends 'base.html' %}
{% block title %}Central de produtos{% endblock title %}
{% block divEsp %}
.especial{
  display: inline-block;
  
}
{% endblock divEsp %}


{% block active2 %}active{% endblock active2 %}{% block desativa2 %}disabled{% endblock desativa2 %}
{% block content %}
<h2>LISTAGEM DE PRODUTOS</h2>
<hr style="margin-top: 5px; margin-bottom: 5px;">

  
<form  method="post">
  {% csrf_token %}

<table>

  <tr >
    <td class="especial" style="width: 150px; padding-top: 0px;" >
      Funcionario <br>
      <select class="form-control select2" name="cadastro" id="cadastro" style="width: 140px;">
    
        {% for funcionarios in func %}
          {% if funcionarios.autor == user.id %}
          <option selected value="{{ funcionarios.id }}">{{ funcionarios.nome }}</option>
          {% else %}
          <option value="{{ funcionarios.id }}">{{ funcionarios.nome }}</option>
          {% endif %}
        {% endfor %}
    </select>
    </td>
    <td class="especial" style="width: 310px;">
      Produto: <br>
      <input type="text" class="form-control form-control-sm" name="nomeProduto" maxlength="30" required="nomeProduto" id="nomeProduto" autofocus style="width:300px;"> 
    </td>
    <td class="especial"style="width: 140px;" >
     R$ V.U. <br>
  
      <input type="number" class="form-control form-control-sm" size="50" name="precoProduto" step="0.01"  id="precoProduto"style="width: 130px;">
    </td>
    <td class="especial"style="width: 160px;">
    Quantidade <br>
      <input type="number" class="form-control form-control-sm" name="quantidadeProduto"  min="0" max="9223372036854775807" id="quantidadeProduto" style="width: 150px;">
    </td>
    <td class="especial"style="width: 110px;" style="position:;">
      <br>
      <button type="submit" class="btn btn-primary btn-sm">Cadastrar</button>
    </td>
  </tr>

</table>


</form>

<hr style="margin-top: 5px; margin-bottom: 5px;">
  <div class="card-body" style="margin-top: 5px; margin-bottom: 5px;" >
    <table class="table table-sm table-hover table-dark ">
      <thead>
        <tr>
          <th scope="col"> Código <a href="{% url 'lista_produtoia' %}">↑</a> | <a href="{% url 'lista_produtoid' %}">↓</a></th>
          <th scope="col">Nome do produto <a href="{% url 'lista_produto' %}">↑</a> | <a href="{% url 'lista_produtod' %}">↓</a></th>
          <th scope="col">Preço <a href="{% url 'lista_produtopa' %}">↑</a> | <a href="{% url 'lista_produtopd' %}">↓</a></th>
          <th scope="col">Qtd. Estoque <a href="{% url 'lista_produtoqa' %}">↑</a> | <a href="{% url 'lista_produtoqd' %}">↓</a></th>
          <th scope="col">Ultimo Lançamento <a href="{% url 'lista_produtoda' %}">↑</a> | <a href="{% url 'lista_produtodd' %}">↓</a></th>
        </tr>
      </thead>
      
      <tbody>
        
        {% for Produto in Produto %}
        {% if Produto.excluido == False %}
          <tr> 
            <td>{{ Produto.id }}  </td>
            <td>{{ Produto.nomeProduto }} </td>
            <td>R${{ Produto.precoProduto }} </td>
            <td>{{ Produto.quantidadeProduto }} </td>
            <td>{{ Produto.dataAlteracao }} </td>
            <td style="display: inline-block;">
              <a type="button" class="btn btn-primary btn-sm" href="{% url 'lancar_produto' Produto.id %}">lançar</a>
              <a type="button" class="btn btn-primary btn-sm" href="{% url 'alterar_produto' Produto.id %}">modificar</a>
              <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#a{{ Produto.id }}">Excluir</button>
              <!-- Botão para acionar a modal -->
            
              <div>
                
                <!-- A modal -->
                
                  <div class="modal" id="a{{ Produto.id }}">
                    
                  <div class="modal-dialog">
                    
                    <div class="modal-content">
                      
                      <div class="modal-header">
                        <h4 class="modal-title">Tem certeza? </h4>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                      </div>
                      <div class="modal-body">Deseja excluir? o {{ Produto.nomeProduto }}?
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
                       
                        <a type="button" class="btn btn-danger" href="{% url 'deletar' Produto.id %}">Deletar</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          {% endif %}
        {% endfor %}


        
      </tbody>

    </table>
    
  </div>
  <script>
    $(document).ready(function() {
        $('.select2').select2();
    });
</script>
{% endblock %}
